<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Flipkart Demo Store</title>

  <style>
    :root{
      --blue:#2874f0;
      --orange:#fb641b;
      --bg:#f1f3f6;
      --text:#1f2937;
      --muted:#6b7280;
      --card:#ffffff;
      --border:#e5e7eb;
      --shadow:0 10px 25px rgba(0,0,0,.08);
      --radius:14px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    /* Top bar */
    .topbar{
      position:sticky; top:0; z-index:50;
      background:var(--blue);
      color:white;
      box-shadow:0 8px 16px rgba(0,0,0,.12);
    }
    .topbar .wrap{
      max-width:1100px; margin:0 auto;
      display:flex; gap:12px; align-items:center;
      padding:12px 14px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:800; letter-spacing:.2px;
      white-space:nowrap;
    }
    .brand .logo{
      width:34px; height:34px; border-radius:10px;
      background:rgba(255,255,255,.18);
      display:grid; place-items:center;
      font-weight:900;
    }
    .search{
      flex:1; display:flex; gap:10px; align-items:center;
    }
    .search input{
      width:100%;
      padding:11px 12px;
      border:none; border-radius:12px;
      outline:none;
      font-size:15px;
    }
    .actions{
      display:flex; align-items:center; gap:10px;
    }
    .pill{
      border:1px solid rgba(255,255,255,.35);
      background:rgba(255,255,255,.14);
      color:white;
      padding:9px 12px;
      border-radius:999px;
      cursor:pointer;
      font-weight:600;
      display:flex; gap:8px; align-items:center;
      user-select:none;
    }
    .pill:hover{ background:rgba(255,255,255,.22) }
    .badge{
      background:white; color:var(--blue);
      padding:2px 8px; border-radius:999px;
      font-weight:800; font-size:12px;
    }

    /* Layout */
    .container{
      max-width:1100px; margin:18px auto;
      padding:0 14px;
      display:grid;
      grid-template-columns: 260px 1fr;
      gap:16px;
    }
    @media (max-width: 900px){
      .container{ grid-template-columns:1fr; }
    }

    /* Sidebar */
    .panel{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .panel .hd{
      padding:14px 14px;
      font-weight:800;
      border-bottom:1px solid var(--border);
      display:flex; justify-content:space-between; align-items:center;
    }
    .panel .bd{ padding:14px; }
    .row{ display:flex; gap:10px; align-items:center; margin:10px 0; }
    select{
      width:100%;
      padding:10px 12px;
      border:1px solid var(--border);
      border-radius:12px;
      outline:none;
      background:white;
      font-size:14px;
    }
    .btn{
      border:none;
      background:var(--orange);
      color:white;
      padding:11px 12px;
      border-radius:12px;
      font-weight:800;
      cursor:pointer;
      width:100%;
      transition:.2s;
    }
    .btn:hover{ filter:brightness(.95) }
    .btn.secondary{
      background:white;
      color:var(--text);
      border:1px solid var(--border);
      font-weight:700;
    }
    .muted{ color:var(--muted); font-size:13px; line-height:1.4; }

    /* Products grid */
    .content .header{
      display:flex; justify-content:space-between; align-items:center;
      gap:10px;
      margin-bottom:12px;
    }
    .content .header h2{
      margin:0; font-size:18px;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:14px;
    }
    @media (max-width: 900px){ .grid{ grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 520px){ .grid{ grid-template-columns: 1fr; } }

    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      display:flex; flex-direction:column;
      transition: transform .18s ease;
    }
    .card:hover{ transform: translateY(-2px); }
    .img{
      height:160px;
      background:#eef2ff;
      display:grid; place-items:center;
      overflow:hidden;
    }
    .img img{ width:100%; height:100%; object-fit:cover; }
    .card .info{ padding:12px; display:flex; flex-direction:column; gap:8px; }
    .title{ font-weight:800; font-size:14px; line-height:1.2; }
    .meta{ display:flex; justify-content:space-between; align-items:center; gap:8px; }
    .price{ font-weight:900; }
    .tag{
      font-size:12px; padding:4px 8px;
      border-radius:999px;
      border:1px solid var(--border);
      color:var(--muted);
      background:#fafafa;
      white-space:nowrap;
    }
    .card .cta{ margin-top:auto; padding:12px; display:flex; gap:10px; }
    .small{
      flex:1;
      padding:10px 10px;
      border-radius:12px;
      border:1px solid var(--border);
      background:white;
      cursor:pointer;
      font-weight:800;
    }
    .small.primary{
      background:var(--orange);
      border:none;
      color:white;
    }

    /* Cart drawer */
    .overlay{
      position:fixed; inset:0;
      background:rgba(0,0,0,.45);
      display:none;
      z-index:60;
    }
    .drawer{
      position:fixed; top:0; right:0; height:100%;
      width:min(420px, 92vw);
      background:white;
      transform:translateX(105%);
      transition:.22s ease;
      z-index:70;
      box-shadow:-20px 0 50px rgba(0,0,0,.18);
      display:flex; flex-direction:column;
    }
    .drawer.open{ transform:translateX(0); }
    .overlay.show{ display:block; }

    .drawer .hd{
      padding:14px 14px;
      border-bottom:1px solid var(--border);
      display:flex; justify-content:space-between; align-items:center;
      font-weight:900;
    }
    .close{
      cursor:pointer; border:1px solid var(--border);
      background:white; border-radius:12px;
      padding:8px 10px; font-weight:900;
    }
    .cartlist{ padding:10px 14px; overflow:auto; flex:1; }
    .item{
      display:flex; gap:10px; padding:10px 0;
      border-bottom:1px dashed var(--border);
      align-items:center;
    }
    .thumb{
      width:64px; height:54px; border-radius:12px;
      overflow:hidden; background:#f3f4f6;
      flex:0 0 auto;
    }
    .thumb img{ width:100%; height:100%; object-fit:cover; }
    .ititle{ font-weight:800; font-size:13px; margin:0 0 2px 0; }
    .iprice{ font-weight:900; font-size:13px; }
    .qty{
      display:flex; gap:8px; align-items:center; margin-left:auto;
    }
    .qbtn{
      width:34px; height:32px;
      border-radius:10px;
      border:1px solid var(--border);
      background:white;
      cursor:pointer;
      font-weight:900;
    }
    .drawer .ft{
      border-top:1px solid var(--border);
      padding:12px 14px;
      display:flex; flex-direction:column; gap:10px;
    }
    .tot{ display:flex; justify-content:space-between; font-weight:900; }

    /* Toast */
    .toast{
      position:fixed; left:50%; bottom:18px;
      transform:translateX(-50%) translateY(20px);
      background:#111827; color:white;
      padding:10px 14px;
      border-radius:999px;
      opacity:0; pointer-events:none;
      transition:.18s ease;
      z-index:80;
      font-weight:700;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
      max-width:90vw;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .toast.show{ opacity:1; transform:translateX(-50%) translateY(0); }

    /* Login modal */
    .modalWrap{
      position:fixed; inset:0;
      display:flex; align-items:center; justify-content:center;
      padding:16px;
      background:rgba(0,0,0,.45);
      z-index:90;
    }
    .modal{
      width:min(420px, 94vw);
      background:white;
      border-radius:16px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .modal .hd{ padding:14px; border-bottom:1px solid var(--border); font-weight:900; }
    .modal .bd{ padding:14px; display:flex; flex-direction:column; gap:10px; }
    .modal input{
      padding:12px 12px; border-radius:12px;
      border:1px solid var(--border); outline:none;
    }
    .modal .ft{ padding:14px; border-top:1px solid var(--border); display:flex; gap:10px; }
  </style>
</head>

<body>

  <!-- TOP BAR -->
  <div class="topbar">
    <div class="wrap">
      <div class="brand">
        <div class="logo">F</div>
        <div>Flipkart Demo</div>
      </div>

      <div class="search">
        <input id="search" type="text" placeholder="Search for products, brands and more..." oninput="render()" />
      </div>

      <div class="actions">
        <div class="pill" onclick="openCart()">
          üõí Cart <span id="cartCount" class="badge">0</span>
        </div>
        <div id="userPill" class="pill" onclick="openLogin()">üë§ Login</div>
      </div>
    </div>
  </div>

  <!-- MAIN -->
  <div class="container">
    <!-- Sidebar -->
    <div class="panel">
      <div class="hd">
        Filters
        <span class="muted" style="font-weight:700;">Static demo</span>
      </div>
      <div class="bd">
        <div class="row">
          <select id="category" onchange="render()">
            <option value="all">All Categories</option>
          </select>
        </div>

        <div class="row">
          <select id="sort" onchange="render()">
            <option value="featured">Sort: Featured</option>
            <option value="low">Price: Low ‚Üí High</option>
            <option value="high">Price: High ‚Üí Low</option>
            <option value="rating">Rating: High ‚Üí Low</option>
          </select>
        </div>

        <button class="btn" onclick="checkout()">Checkout</button>
        <button class="btn secondary" style="margin-top:10px;" onclick="clearCart()">Clear Cart</button>

        <p class="muted" style="margin-top:12px;">
          Note: This is a <b>static</b> demo. Login is UI-only (no real auth). Checkout just shows a success message.
        </p>
      </div>
    </div>

    <!-- Content -->
    <div class="content">
      <div class="header">
        <h2 id="resultTitle">Products</h2>
        <div class="muted" id="resultCount"></div>
      </div>

      <div class="grid" id="grid"></div>
    </div>
  </div>

  <!-- CART DRAWER -->
  <div id="overlay" class="overlay" onclick="closeCart()"></div>
  <div id="drawer" class="drawer">
    <div class="hd">
      Your Cart
      <button class="close" onclick="closeCart()">‚úï</button>
    </div>
    <div class="cartlist" id="cartList"></div>
    <div class="ft">
      <div class="tot">
        <div>Total</div>
        <div id="cartTotal">‚Çπ0</div>
      </div>
      <button class="btn" onclick="checkout()">Place Order</button>
    </div>
  </div>

  <!-- TOAST -->
  <div id="toast" class="toast"></div>

  <!-- LOGIN MODAL -->
  <div id="loginWrap" class="modalWrap" style="display:none;">
    <div class="modal">
      <div class="hd">Login (UI only)</div>
      <div class="bd">
        <input id="email" type="text" placeholder="Enter email" />
        <input id="password" type="password" placeholder="Enter password" />
        <div class="muted">Tip: enter anything (non-empty) ‚Äî this is a static demo.</div>
      </div>
      <div class="ft">
        <button class="btn secondary" onclick="closeLogin()">Cancel</button>
        <button class="btn" onclick="login()">Login</button>
      </div>
    </div>
  </div>

<script>
  // ----- Data -----
  const products = [
    {id:1, title:"Apple iPhone 14 (128GB)", price:52999, rating:4.6, category:"Mobiles", img:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?auto=format&fit=crop&w=1200&q=70"},
    {id:2, title:"Noise Wireless Headphones", price:1999, rating:4.2, category:"Audio", img:"https://images.unsplash.com/photo-1518441311925-10f5c0b72f61?auto=format&fit=crop&w=1200&q=70"},
    {id:3, title:"Gaming Mouse RGB", price:799, rating:4.3, category:"Accessories", img:"https://images.unsplash.com/photo-1615663245857-ac93bb7c39e7?auto=format&fit=crop&w=1200&q=70"},
    {id:4, title:"Smartwatch Series X", price:2999, rating:4.1, category:"Wearables", img:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&w=1200&q=70"},
    {id:5, title:"Laptop Backpack 25L", price:999, rating:4.0, category:"Fashion", img:"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?auto=format&fit=crop&w=1200&q=70"},
    {id:6, title:"Bluetooth Speaker Mini", price:1299, rating:4.4, category:"Audio", img:"https://images.unsplash.com/photo-1558089687-f282ffcbc126?auto=format&fit=crop&w=1200&q=70"},
    {id:7, title:"Men‚Äôs Running Shoes", price:2499, rating:4.2, category:"Fashion", img:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=1200&q=70"},
    {id:8, title:"Mechanical Keyboard", price:3499, rating:4.5, category:"Accessories", img:"https://images.unsplash.com/photo-1618384887929-16ec33fab9ef?auto=format&fit=crop&w=1200&q=70"},
    {id:9, title:"Android 5G Phone (8GB/128GB)", price:17999, rating:4.3, category:"Mobiles", img:"https://images.unsplash.com/photo-1598327105666-5b89351aff97?auto=format&fit=crop&w=1200&q=70"},
  ];

  let cart = JSON.parse(localStorage.getItem("demo_cart") || "{}"); // {id: qty}
  let user = JSON.parse(localStorage.getItem("demo_user") || "null"); // {email}

  // ----- Helpers -----
  const ‚Çπ = n => "‚Çπ" + (n||0).toLocaleString("en-IN");
  function toast(msg){
    const t = document.getElementById("toast");
    t.textContent = msg;
    t.classList.add("show");
    setTimeout(()=>t.classList.remove("show"), 1600);
  }
  function save(){
    localStorage.setItem("demo_cart", JSON.stringify(cart));
    localStorage.setItem("demo_user", JSON.stringify(user));
  }

  // ----- UI Init -----
  function initCategories(){
    const cats = ["all", ...new Set(products.map(p=>p.category))];
    const sel = document.getElementById("category");
    sel.innerHTML = cats.map(c => `<option value="${c}">${c === "all" ? "All Categories" : c}</option>`).join("");
  }

  function updateTopbar(){
    const count = Object.values(cart).reduce((a,b)=>a+b,0);
    document.getElementById("cartCount").textContent = count;

    const pill = document.getElementById("userPill");
    pill.innerHTML = user ? `üë§ ${user.email.split("@")[0]} <span class="badge" style="margin-left:6px;">Logout</span>` : "üë§ Login";
    pill.onclick = user ? logout : openLogin;
  }

  // ----- Rendering products -----
  function getFiltered(){
    const q = (document.getElementById("search").value || "").toLowerCase().trim();
    const cat = document.getElementById("category").value;
    let list = products.filter(p => {
      const matchQ = !q || p.title.toLowerCase().includes(q) || p.category.toLowerCase().includes(q);
      const matchC = (cat === "all") || (p.category === cat);
      return matchQ && matchC;
    });

    const sort = document.getElementById("sort").value;
    if(sort === "low") list.sort((a,b)=>a.price-b.price);
    if(sort === "high") list.sort((a,b)=>b.price-a.price);
    if(sort === "rating") list.sort((a,b)=>b.rating-a.rating);

    return list;
  }

  function render(){
    const list = getFiltered();
    document.getElementById("resultTitle").textContent = "Products";
    document.getElementById("resultCount").textContent = `${list.length} item(s)`;

    const grid = document.getElementById("grid");
    grid.innerHTML = list.map(p => `
      <div class="card">
        <div class="img"><img src="${p.img}" alt="${escapeHtml(p.title)}"></div>
        <div class="info">
          <div class="title">${escapeHtml(p.title)}</div>
          <div class="meta">
            <div class="price">${‚Çπ(p.price)}</div>
            <div class="tag">‚≠ê ${p.rating} ‚Ä¢ ${escapeHtml(p.category)}</div>
          </div>
        </div>
        <div class="cta">
          <button class="small" onclick="viewProduct(${p.id})">View</button>
          <button class="small primary" onclick="addToCart(${p.id})">Add</button>
        </div>
      </div>
    `).join("");
    updateTopbar();
  }

  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, m => ({
      "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
    }[m]));
  }

  // ----- Cart -----
  function addToCart(id){
    cart[id] = (cart[id] || 0) + 1;
    save();
    updateTopbar();
    toast("Added to cart");
    renderCart();
  }
  function removeFromCart(id){
    if(!cart[id]) return;
    cart[id] -= 1;
    if(cart[id] <= 0) delete cart[id];
    save();
    updateTopbar();
    renderCart();
  }
  function clearCart(){
    cart = {};
    save();
    updateTopbar();
    renderCart();
    toast("Cart cleared");
  }

  function cartItems(){
    return Object.entries(cart).map(([id, qty]) => {
      const p = products.find(x => x.id === Number(id));
      return {p, qty};
    }).filter(x => x.p);
  }

  function renderCart(){
    const list = cartItems();
    const el = document.getElementById("cartList");

    if(list.length === 0){
      el.innerHTML = `<p class="muted">Your cart is empty. Add some products üôÇ</p>`;
      document.getElementById("cartTotal").textContent = ‚Çπ(0);
      return;
    }

    let total = 0;
    el.innerHTML = list.map(({p, qty}) => {
      total += p.price * qty;
      return `
        <div class="item">
          <div class="thumb"><img src="${p.img}" alt="${escapeHtml(p.title)}"></div>
          <div style="min-width:0;">
            <div class="ititle">${escapeHtml(p.title)}</div>
            <div class="iprice">${‚Çπ(p.price)}</div>
          </div>
          <div class="qty">
            <button class="qbtn" onclick="removeFromCart(${p.id})">‚àí</button>
            <div style="min-width:22px; text-align:center; font-weight:900;">${qty}</div>
            <button class="qbtn" onclick="addToCart(${p.id})">+</button>
          </div>
        </div>
      `;
    }).join("");

    document.getElementById("cartTotal").textContent = ‚Çπ(total);
  }

  function openCart(){
    document.getElementById("overlay").classList.add("show");
    document.getElementById("drawer").classList.add("open");
    renderCart();
  }
  function closeCart(){
    document.getElementById("overlay").classList.remove("show");
    document.getElementById("drawer").classList.remove("open");
  }

  // ----- View Product (simple) -----
  function viewProduct(id){
    const p = products.find(x=>x.id===id);
    if(!p) return;
    toast(`${p.title} ‚Ä¢ ${‚Çπ(p.price)}`);
  }

  // ----- Login (UI only) -----
  function openLogin(){
    document.getElementById("loginWrap").style.display = "flex";
  }
  function closeLogin(){
    document.getElementById("loginWrap").style.display = "none";
  }
  function login(){
    const email = document.getElementById("email").value.trim();
    const pass = document.getElementById("password").value.trim();
    if(!email || !pass){
      alert("Enter email and password");
      return;
    }
    user = {email};
    save();
    closeLogin();
    updateTopbar();
    toast("Logged in (demo)");
  }
  function logout(){
    user = null;
    save();
    updateTopbar();
    toast("Logged out");
  }

  // ----- Checkout -----
  function checkout(){
    const hasItems = Object.keys(cart).length > 0;
    if(!hasItems){
      toast("Cart is empty");
      return;
    }
    if(!user){
      openLogin();
      toast("Login to place order");
      return;
    }
    clearCart();
    closeCart();
    alert("‚úÖ Order Placed Successfully!\n\nThank you for shopping (demo).");
  }

  // ----- Start -----
  initCategories();
  updateTopbar();
  render();
</script>
</body>
</html>
